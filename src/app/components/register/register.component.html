<!-- <app-navbar></app-navbar> -->
<div class="register-container">
  <div class="card">
    <div class="text-center">
      <h1>Register</h1>
      <h6>Please fill in your details to create an account</h6>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Full Name -->
      <div class="mb-3 input-group">
        <label for="fullName" class="form-label">Full Name</label>
        <input
          id="fullName"
          type="text"
          class="form-control"
          formControlName="fullName"
          placeholder="Enter your full name"
          autocomplete="name"
        />
        @if (fullName?.invalid && fullName?.touched) {
          <div class="form-text text-warning">
            @if (fullName?.errors?.['required']) { <div>Full name is required.</div> }
          </div>
        }
      </div>

      <!-- DOB -->
      <div class="mb-3 input-group">
        <label for="dob" class="form-label">Date of Birth</label>
        <input
          id="dob"
          type="date"
          class="form-control"
          formControlName="dob"
        />
        @if (dob?.invalid && dob?.touched) {
          <div class="form-text text-warning">
            @if (dob?.errors?.['required']) { <div>Date of birth is required.</div> }
          </div>
        }
      </div>

      <!-- Username -->
      <div class="mb-3 input-group">
        <label for="username" class="form-label">Username</label>
        <input
          id="username"
          type="text"
          class="form-control"
          formControlName="username"
          placeholder="Enter your username"
          autocomplete="username"
        />
        @if (username?.invalid && username?.touched) {
          <div class="form-text text-warning">
            @if (username?.errors?.['required']) { <div>Username is required.</div> }
          </div>
        }
      </div>

      <!-- Email -->
      <div class="mb-3 input-group">
        <label for="email" class="form-label">Email address</label>
        <input
          id="email"
          type="email"
          class="form-control"
          formControlName="email"
          placeholder="Enter your email"
          autocomplete="email"
        />
       

        @if (email?.invalid && email?.touched) {
          <div class="form-text text-warning">
            @if (email?.errors?.['required']) { <div>Email is required.</div> }
            @if (email?.errors?.['email'])    { <div>Invalid email format.</div> }
          </div>
        }
      </div>

      <!-- Residential Address -->
      <div class="mb-3 input-group">
        <label for="residentialAddress" class="form-label">Residential Address</label> 
        <br>
        <textarea
          id="residentialAddress"
          class="form-control"
          formControlName="residentialAddress"
          placeholder="Enter your residential address"
          rows="3"
        ></textarea>
        @if (residentialAddress?.invalid && residentialAddress?.touched) {
          <div class="form-text text-warning">
            @if (residentialAddress?.errors?.['required']) { <div>Residential address is required.</div> }
          </div>
        }
      </div>

      <!-- ID Type -->
      <div class="mb-3 input-group">
        <label for="idType" class="form-label">ID Type</label>
        <select id="idType" class="form-control" formControlName="idType">
          <option value="">Select ID Type</option>
          <option value="passport">Passport</option>
          <option value="drivers-license">Driver's License</option>
          <option value="national-id">National ID</option>
          <option value="other">Other</option>
        </select>
        @if (idType?.invalid && idType?.touched) {
          <div class="form-text text-warning">
            @if (idType?.errors?.['required']) { <div>ID type is required.</div> }
          </div>
        }
      </div>

      <!-- ID Number -->
      <div class="mb-3 input-group">
        <label for="idNumber" class="form-label">ID Number</label>
        <input
          id="idNumber"
          type="text"
          class="form-control"
          formControlName="idNumber"
          placeholder="Enter your ID number"
        />
        @if (idNumber?.invalid && idNumber?.touched) {
          <div class="form-text text-warning">
            @if (idNumber?.errors?.['required']) { <div>ID number is required.</div> }
          </div>
        }
      </div>

      <!-- Declaration Checkbox -->
      <div class="mb-3 input-group">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" formControlName="declaration" id="declaration">
          <label class="form-check-label" for="declaration">
            I confirm that the information provided is true and accurate.
          </label>
        </div>
        @if (declaration?.invalid && declaration?.touched) {
          <div class="form-text text-warning">
            @if (declaration?.errors?.['required']) { <div>You must confirm the declaration.</div> }
          </div>
        }
      </div>

      <!-- Password -->
      <div class="mb-3 input-group">
        <label for="password" class="form-label">Password</label>
        <input
          id="password"
          type="password"
          class="form-control"
          formControlName="password"
          placeholder="Enter your password"
          autocomplete="new-password"
        />
        @if (password?.invalid && password?.touched) {
          <div class="form-text text-warning">
            @if (password?.errors?.['required'])  { <div>Password is required.</div> }
            @if (password?.errors?.['minlength']) { <div>At least 8 characters.</div> }
          </div>
        }
      </div>

      <!-- Messages -->
      @if (error)   { <p class="error-message">{{ error }}</p> }
      @if (success) { <p class="success-message">{{ success }}</p> }

      <!-- Submit -->
      <button type="submit" class="btn btn-primary mb-2" [disabled]="registerForm.invalid || isSubmitting">
        @if (isSubmitting) { <span>Registeringâ€¦</span> } @else { <span>Register</span> }
      </button>
    </form>

    <a routerLink="/">Already have an account? Click to login!!</a>
  </div>
</div>
